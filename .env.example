# ============================================================================
# CCXT API Configuration
# ============================================================================
# Optional: Required only for private endpoints or higher rate limits
# Public OHLCV data works without API keys
CCXT_API_KEY=
CCXT_SECRET=

# ============================================================================
# Backtest Configuration
# ============================================================================
# Trading pair to backtest (format: BASE-QUOTE)
SYMBOL=BTC-USDT

# Candle timeframe (5m, 15m, 1h, 4h, 1d, etc.)
TIMEFRAME=15m

# Number of days to backtest (from latest available data)
BACKTEST_DAYS=90

# ============================================================================
# Futures Settings
# ============================================================================
# Leverage multiplier (1.0 = no leverage, same as spot)
LEVERAGE=1.0

# Position size as percentage of capital (0.95 = 95%)
POSITION_PCT=0.95

# ============================================================================
# Risk Management
# ============================================================================
# Stop loss as ATR multiplier (1.5 = 1.5x ATR from entry)
SL_ATR_MULT=1.5

# Take profit as ATR multiplier (2.5 = 2.5x ATR from entry)
TP_ATR_MULT=2.5

# ============================================================================
# Signal Scoring & Filtering
# ============================================================================
# Minimum score required for valid signal (0-10 scale)
MIN_SCORE=5.0

# Minimum number of timeframes that must align (1-4)
MIN_TF_ALIGNMENT=3

# Minimum reward/risk ratio required for entry (e.g., 1.5 = 1.5:1 RR)
MIN_RR_RATIO=1.5

# ============================================================================
# Timing Parameters
# ============================================================================
# Warmup bars before trading starts (to build indicators)
WARMUP_BARS=500

# Cooldown bars after exit before next entry (prevents overtrading)
COOLDOWN_BARS=24

# Maximum bars to hold position before forced exit (prevent stale positions)
MAX_HOLD_BARS=72

# ============================================================================
# Wyckoff Box Detection (Theta Parameters)
# ============================================================================
# Lookback period for Wyckoff box formation (in bars)
BOX_LOOKBACK=50

# Spring/Upthrust detection threshold (0.005 = 0.5% penetration)
SPRING_THRESHOLD=0.005

# Bars to freeze after box event (prevents re-entry too soon)
M_FREEZE=16

# Pivot detection left/right bars (for swing highs/lows)
PIVOT_LR=3

# ATR calculation period
ATR_LEN=14

# ATR multiplier for box width expansion
X_ATR=2.0

# Box width as percentage (0.02 = 2%)
M_BW=0.02

# Bars required to confirm reclaim/rejection
N_RECLAIM=8

# Minimum fill probability (0.3 = 30% chance of fill required)
F_MIN=0.3

# Bars to wait for order fill confirmation
N_FILL=5

# ============================================================================
# Technical Indicators
# ============================================================================
# RSI calculation period
RSI_PERIOD=14

# Stochastic RSI calculation period
STOCH_RSI_PERIOD=14

# Lookback period for divergence detection
DIV_LOOKBACK=20

# ZigZag minimum price move threshold (0.02 = 2%)
ZIGZAG_THRESHOLD=0.02

# ADX (Average Directional Index) calculation period
ADX_LEN=14

# ADX threshold for trend confirmation (15.0 = trend if ADX > 15)
ADX_TREND=15.0

# ============================================================================
# Trading Costs (in decimal format)
# ============================================================================
# Note: Will be converted to basis points (bps) internally where needed
# 0.0002 = 0.02% = 2 basis points

# Maker fee (limit orders)
MAKER_FEE=0.0002

# Taker fee (market orders)
TAKER_FEE=0.0004

# Slippage estimate per trade
SLIPPAGE=0.0002

# ============================================================================
# Probability Model (First-Passage Model)
# ============================================================================
# Enable/disable probability-based filtering
USE_PROBABILITY_MODEL=False

# Minimum take profit hit probability (0.50 = 50%)
MIN_TP_PROBABILITY=0.50

# Minimum expected value per risk unit (0.05 = 5% EV per R)
MIN_EV_R=0.05

# Minimum expected return per trade (0.003 = 0.3%)
MIN_EXPECTED_RR=0.003

# ============================================================================
# Navigation Gate (Quality Filter)
# ============================================================================
# Enable/disable navigation gate filtering
USE_NAVIGATION_GATE=True

# Minimum confidence score (0.50 = 50% confidence required)
CONF_MIN=0.50

# Minimum edge score (0.60 = 60% edge required)
EDGE_MIN=0.60

# Chaos detection threshold: |return| > CHAOS_RET_ATR * ATR/close = CHAOS
CHAOS_RET_ATR=3.0

# ============================================================================
# Fractal Navigation (Wyckoff Phase-based Adaptation)
# ============================================================================
# Enable fractal-based Navigation Gate adaptation
# When True: HTF Phase C (Markup/Markdown = trending) uses strict Navigation Gate
#           HTF Phase A/B (Accumulation/Distribution = ranging) relaxes Navigation Gate
# When False: Navigation Gate always applied (original behavior)
# Theory: Wyckoff Phase accumulation works best in ranging markets (Phase A/B)
#         Navigation Gate works best in trending markets (Phase C)
USE_FRACTAL_NAVIGATION=True

# ============================================================================
# Multi-Timeframe Analysis
# ============================================================================
# Timeframes for MTF confluence (comma-separated, no spaces)
# Higher timeframes provide trend context for lower timeframe entries
MTF_TIMEFRAMES=1h,4h

# ============================================================================
# Execution Settings
# ============================================================================
# Initial capital in USD
INITIAL_CAPITAL=10000.0

# ============================================================================
# Spot Engine Settings (BacktestEngine)
# ============================================================================
# Fraction of position to take profit at TP1 (0.5 = 50%)
TP1_FRAC=0.5

# Enable second take profit target
USE_TP2=True

# Bars to confirm signal before entry (prevents false signals)
CONFIRM_BARS=1

# Enable scalping mode (tighter exits, faster trades)
SCALPING_MODE=True

# Enable Wyckoff Phase A/B accumulation/distribution patterns
USE_PHASE_ACCUMULATION=True

# Spot mode: disable shorts, long-only trading
SPOT_MODE=True
